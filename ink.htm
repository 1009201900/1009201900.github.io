<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="320" name="MobileOptimized">
    <title></title>
    <style>
        .container {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #000;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
        }

        .dot-3 {
            background-color: #f74d75;
        }

        .dot-2 {
            background-color: #10beae;
        }

        .dot-1 {
            background-color: #ffe386;
        }

        .dot-3 {
            background-color: #f74d75;
            animation: dot-3-move 2s ease infinite;
        }

        @keyframes  dot-3-move {
            20% {
                transform: scale(1)
            }

            45% {
                transform: translateY(-18px) scale(.45)
            }

            60% {
                transform: translateY(-25px) scale(.45)
            }

            80% {
                transform: translateY(-25px) scale(.45)
            }

            100% {
                transform: translateY(0px) scale(1)
            }
        }

        .dot-2 {
            background-color: #10beae;
            animation: dot-2-move 2s ease infinite;
        }

        .dot-1 {
            background-color: #ffe386;
            animation: dot-1-move 2s ease infinite;
        }

        @keyframes  dot-2-move {
            20% {
                transform: scale(1)
            }

            45% {
                transform: translate(-16px, 12px) scale(.45)
            }

            60% {
                transform: translate(-20px, 15px) scale(.45)
            }

            80% {
                transform: translate(-20px, 15px) scale(.45)
            }

            100% {
                transform: translateY(0px) scale(1)
            }
        }

        @keyframes  dot-1-move {
            20% {
                transform: scale(1)
            }

            45% {
                transform: translate(16px, 12px) scale(.45)
            }

            60% {
                transform: translate(20px, 15px) scale(.45)
            }

            80% {
                transform: translate(20px, 15px) scale(.45)
            }

            100% {
                transform: translateY(0px) scale(1)
            }
        }

        .container {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: rotate-move 2s ease-in-out infinite;
        }

        @keyframes  rotate-move {
            55% {
                transform: translate(-50%, -50%) rotate(0deg)
            }

            80% {
                transform: translate(-50%, -50%) rotate(360deg)
            }

            100% {
                transform: translate(-50%, -50%) rotate(360deg)
            }
        }
        .container {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #000;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
        }

        .dot-3 {
            background-color: #f74d75;
        }

        .dot-2 {
            background-color: #10beae;
        }

        .dot-1 {
            background-color: #ffe386;
        }

        .dot-3 {
            background-color: #f74d75;
            animation: dot-3-move 2s ease infinite;
        }

        @keyframes  dot-3-move {
            20% {
                transform: scale(1)
            }

            45% {
                transform: translateY(-18px) scale(.45)
            }

            60% {
                transform: translateY(-25px) scale(.45)
            }

            80% {
                transform: translateY(-25px) scale(.45)
            }

            100% {
                transform: translateY(0px) scale(1)
            }
        }

        .dot-2 {
            background-color: #10beae;
            animation: dot-2-move 2s ease infinite;
        }

        .dot-1 {
            background-color: #ffe386;
            animation: dot-1-move 2s ease infinite;
        }

        @keyframes  dot-2-move {
            20% {
                transform: scale(1)
            }

            45% {
                transform: translate(-16px, 12px) scale(.45)
            }

            60% {
                transform: translate(-20px, 15px) scale(.45)
            }

            80% {
                transform: translate(-20px, 15px) scale(.45)
            }

            100% {
                transform: translateY(0px) scale(1)
            }
        }

        @keyframes  dot-1-move {
            20% {
                transform: scale(1)
            }

            45% {
                transform: translate(16px, 12px) scale(.45)
            }

            60% {
                transform: translate(20px, 15px) scale(.45)
            }

            80% {
                transform: translate(20px, 15px) scale(.45)
            }

            100% {
                transform: translateY(0px) scale(1)
            }
        }

        .container {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: rotate-move 2s ease-in-out infinite;
        }

        @keyframes  rotate-move {
            55% {
                transform: translate(-50%, -50%) rotate(0deg)
            }

            80% {
                transform: translate(-50%, -50%) rotate(360deg)
            }

            100% {
                transform: translate(-50%, -50%) rotate(360deg)
            }
        }
        .content{height:100%;width:100%;position: fixed;left: -2px;top: -2px;}
    </style>
<body>

<div class="container">
    <div class="dot dot-1"></div>
    <div class="dot dot-2"></div>
    <div class="dot dot-3"></div>
</div>
<script>
    // 白名单配置（按需修改）
    const allowedDomains = [
        "www.u1v.cn",       // 主域名
        "",   // 子域名
        "", // 特定路径
        "" // 另一特定路径
    ];
    
    var urlParams = new URLSearchParams(window.location.search);
    var encodedParam = urlParams.get('c');
    
    if (encodedParam) {
        try {
            var tureurl = atob(encodedParam);
            var isAllowed = false;
            
            // 检查是否在白名单中
            for (const allowedDomain of allowedDomains) {
                // 检查完整域名或特定路径
                if (tureurl.includes(allowedDomain) || 
                   tureurl.includes('://' + allowedDomain)) {
                    isAllowed = true;
                    break;
                }
                
                // 检查主域名匹配
                const domainOnly = allowedDomain.split('/')[0];
                if (tureurl.includes(domainOnly)) {
                    const urlParts = tureurl.split('/');
                    if (urlParts.length > 2) {
                        const targetDomain = urlParts[2];
                        if (targetDomain === domainOnly || 
                            targetDomain.endsWith('.' + domainOnly)) {
                            isAllowed = true;
                            break;
                        }
                    }
                }
            }
            
            if (isAllowed) {
                var html = '<iframe class="content" style="width: calc(100% + 16px );min-height: calc(100vh + 16px );border: none;margin: -8px;" οnlοad="bindMouseWhee(this)" src="' + tureurl + '"></iframe>';
                document.writeln(html);
            } else {
                // 简洁的错误页面卡片
                document.write(`
                    <div style="
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                    ">
                        <div style="
                            background: white;
                            border-radius: 12px;
                            padding: 40px;
                            text-align: center;
                            max-width: 80%;
                            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                        ">
                            <div style="
                                font-size: 60px;
                                margin-bottom: 20px;
                                color: #f74d75;
                            ">
                                ⚠️
                            </div>
                            <h1 style="
                                font-size: 1.8rem;
                                margin-bottom: 15px;
                            ">
                                域名未授权
                            </h1>
                            <p style="
                                font-size: 1rem;
                                line-height: 1.6;
                            ">
                                该域名未过白<br>
                                请联系站长过白
                            </p>
                        </div>
                    </div>
                `);
            }

        } catch (e) {
            // URL参数错误时不做任何处理（保持原有行为）
        }
    }


    // fetch(p+'/index.php/client/check?op=domain', {
    //     method: 'POST',
    //     headers: {
    //         'Content-Type': 'application/json'
    //     },
    //     body: JSON.stringify({ url: mainDomain, fullurl: tureurl }) // 发送JSON格式的请求体
    // }).then(response => {
    //     if (!response.ok) {
    //         throw new Error(`HTTP error! status: ${response.status}`);
    //     }
    //     return response.json();
    // })
    //     .then(res => {
    //         console.log(res);
    //         let {status,msg,data} = res
    //         if (status != 1) {
    //             return alert(msg);
    //         }
    //         var html='<iframe class="content" style="width: calc(100% + 16px );min-height: calc(100% + 16px );border: none;margin: -8px;" οnlοad="bindMouseWhee(this)" src='+tureurl+'></iframe>';
    //         document.writeln(html);
    //     })

    // if (tureurl.includes("http")) {
    // var square = document.getElementById("container");
    // setTimeout(function() {
    //   square.style.display = "none";
    // }, 1500);
    // console.log(tureurl);
    // }


    var firefox = navigator.userAgent.indexOf('Firefox') != -1;
    function MouseWheel(e,doc){
        e.preventDefault && e.preventDefault(),e.returnValue = false;
        var up = firefox && e.detail < 0 || e.wheelDelta > 0;
        doc.body.scrollTop = doc.documentElement.scrollTop += up?-50:50;
    }
    function bindMouseWhee(ifr){
        try{
            var doc = ifr.contentWindow.document;
            firefox?doc.addEventListener('DOMMouseScroll',function(e){MouseWheel(e,doc)},false):(doc.onmousewheel = function(e){MouseWheel(e||ifr.contentWindow.event,doc)});
        }catch(e){
            // 静默处理跨域错误
        }
    }
    function getMainDomain(url) {
        try {
            var hostname = new URL(url).hostname;
            var parts = hostname.split('.');
            if (parts.length > 2) {
                return parts.slice(-2).join('.');
            } else {
                return hostname;
            }
        } catch (e) {
            return null;
        }
    }
</script>
